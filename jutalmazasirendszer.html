<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Motiva Reward System Builder</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: 20px auto; line-height: 1.5; }
    .step { display: none; }
    .step.active { display: block; }
    h2 { margin-top: 0; }
    .inputs { margin: 10px 0; }
    .inputs input { width: 100%; padding: 8px; margin: 5px 0; box-sizing: border-box; }
    .tables { display: flex; flex-wrap: wrap; gap: 20px; margin: 20px 0; }
    table { border-collapse: collapse; width: 48%; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background: #f0f0f0; }
    button { padding: 10px 20px; font-size: 16px; margin-top: 10px; }
    button:disabled { background: #ccc; }
  </style>
</head>
<body>

  <!-- Step 1: Choose Healthy Habits -->
  <div id="step1" class="step active">
    <h2>1. Health-related Habits</h2>
    <p>First of all, think of all the health-related habits you would like to introduce to your life. As you are in the program, your top priority will be working out, so just put <strong>working out twice a week</strong> as your goal. There are two more spots—think eating habits, sleeping habits, cold showers, taking vitamins, eating more fruit, phone-free periods—anything you've wanted to integrate but find hard to stick with. You will earn MotivaPoints for carrying these out.</p>
    <div class="inputs">
      <input type="text" id="habit1" value="Working out twice a week" disabled>
      <input type="text" id="habit2" placeholder="Enter another healthy habit">
      <input type="text" id="habit3" placeholder="Enter another healthy habit">
    </div>
    <button id="toStep2">Next</button>
  </div>

  <!-- Step 2: Define Rewards & Unhealthy Habit -->
  <div id="step2" class="step">
    <h2>2. Rewards & Unhealthy Habit</h2>
    <p>Now let's think of some rewards for these activities. What are some things you've been meaning to buy or do? Massages, beauty products, clothes, eating out, a book, a concert—anything you really want but could delay until you deserve it. Think of <strong>3 smaller rewards</strong> you can claim after a couple of weeks and <strong>3 bigger milestone rewards</strong> for sticking with your habits for 4–5 months.</p>
    <h3>My Small Rewards</h3>
    <div class="inputs">
      <input type="text" id="small1" placeholder="Small reward #1">
      <input type="text" id="small2" placeholder="Small reward #2">
      <input type="text" id="small3" placeholder="Small reward #3">
    </div>
    <h3>My Milestone Rewards</h3>
    <div class="inputs">
      <input type="text" id="mile1" placeholder="Milestone reward #1">
      <input type="text" id="mile2" placeholder="Milestone reward #2">
      <input type="text" id="mile3" placeholder="Milestone reward #3">
    </div>
    <p>Now, think of the other side of the deal: one unhealthy habit you'd like to get rid of. You'll lose points for this.</p>
    <div class="inputs">
      <input type="text" id="unhealthy" placeholder="Unhealthy habit to drop">
    </div>
    <button id="toStep3">Next</button>
  </div>

  <!-- Step 3: Assign Points & Finalize -->
  <div id="step3" class="step">
    <h2>3. Assign MotivaPoints</h2>
    <p>Calculate the total points you could earn with 3–4 weeks of consistent effort. Use that number for each small reward. Then multiply it by 5, 10, and 15 for your milestone rewards. Let's get counting!</p>
    <div class="tables">
      <div>
        <h3>My Healthy Habits</h3>
        <table id="habitsTable">
          <tr><th>Habit</th><th>Points</th></tr>
        </table>
      </div>
      <div>
        <h3>My Small Rewards</h3>
        <table id="smallTable">
          <tr><th>Reward</th><th>Points Required</th></tr>
        </table>
      </div>
      <div>
        <h3>My Milestone Rewards</h3>
        <table id="mileTable">
          <tr><th>Reward</th><th>Points Required</th></tr>
        </table>
      </div>
      <div>
        <h3>Unhealthy Habit</h3>
        <table id="unhealthyTable">
          <tr><th>Habit</th><th>Points Deducted</th></tr>
        </table>
      </div>
    </div>
    <button id="finalize" disabled>Finalize & Download</button>
  </div>

  <script>
    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    const step3 = document.getElementById('step3');
    document.getElementById('toStep2').onclick = () => {
      step1.classList.remove('active');
      step2.classList.add('active');
    };
    document.getElementById('toStep3').onclick = () => {
      const habits = [
        document.getElementById('habit1').value,
        document.getElementById('habit2').value,
        document.getElementById('habit3').value
      ];
      const small = [
        document.getElementById('small1').value,
        document.getElementById('small2').value,
        document.getElementById('small3').value
      ];
      const mile = [
        document.getElementById('mile1').value,
        document.getElementById('mile2').value,
        document.getElementById('mile3').value
      ];
      const unhealthy = document.getElementById('unhealthy').value;

      const habitsTable = document.getElementById('habitsTable');
      const smallTable = document.getElementById('smallTable');
      const mileTable = document.getElementById('mileTable');
      const unhealthyTable = document.getElementById('unhealthyTable');

      // Populate tables with inputs and point fields
      habits.forEach(h => {
        if (h) {
          const row = habitsTable.insertRow();
          row.insertCell().innerText = h;
          const cell = row.insertCell();
          const inp = document.createElement('input');
          inp.type = 'number';
          inp.min = '0';
          inp.required = true;
          cell.appendChild(inp);
        }
      });
      small.forEach(r => {
        if (r) {
          const row = smallTable.insertRow();
          row.insertCell().innerText = r;
          const cell = row.insertCell();
          const inp = document.createElement('input');
          inp.type = 'number';
          inp.min = '0';
          inp.required = true;
          cell.appendChild(inp);
        }
      });
      mile.forEach(r => {
        if (r) {
          const row = mileTable.insertRow();
          row.insertCell().innerText = r;
          const cell = row.insertCell();
          const inp = document.createElement('input');
          inp.type = 'number';
          inp.min = '0';
          inp.required = true;
          cell.appendChild(inp);
        }
      });
      if (unhealthy) {
        const row = unhealthyTable.insertRow();
        row.insertCell().innerText = unhealthy;
        const cell = row.insertCell();
        const inp = document.createElement('input');
        inp.type = 'number';
        inp.min = '0';
        inp.required = true;
        cell.appendChild(inp);
      }

      step2.classList.remove('active');
      step3.classList.add('active');

      // Enable finalize when all point fields are filled
      const allInputs = step3.querySelectorAll('input[type="number"]');
      allInputs.forEach(i => {
        i.addEventListener('input', () => {
          const allFilled = Array.from(allInputs).every(inp => inp.value !== '');
          document.getElementById('finalize').disabled = !allFilled;
        });
      });
    };

    document.getElementById('finalize').onclick = () => {
      document.getElementById('finalize').innerText = 'Preparing image...';
      html2canvas(document.body).then(canvas => {
        const link = document.createElement('a');
        link.download = 'My_Motiva_Reward_System.png';
        link.href = canvas.toDataURL();
        link.click();
        document.getElementById('finalize').innerText = 'Download Ready';
      });
    };
  </script>

</body>
</html>
